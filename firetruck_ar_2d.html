<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>消防車AR（自動アスペクト調整）</title>
  <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>body{margin:0;overflow:hidden;background:#000}</style>
</head>
<body>
  <a-scene embedded arjs>
    <a-assets>
      <img id="truck" src="assets/9022824d14.png">
    </a-assets>

    <a-marker preset="hiro">
      <a-image id="truckImg"
               src="#truck"
               position="0 0 0"
               rotation="0 0 0"
               width="8"
　　　　　　　　material="transparent:true; alphaTest:0.05; side:double"></a-image>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // 画像が読み込まれたら自然サイズから高さを自動算出
    document.querySelector('#truck').addEventListener('load', function(){
      const img = this; // <img id="truck">
      const aspect = img.naturalHeight / img.naturalWidth; // 高さ/幅
      const imageEl = document.querySelector('#truckImg');
      const w = parseFloat(imageEl.getAttribute('width')) || 6; // 既定幅
      imageEl.setAttribute('height', (w * aspect).toFixed(3));
    });
  </script>
</body>
</html>
``
